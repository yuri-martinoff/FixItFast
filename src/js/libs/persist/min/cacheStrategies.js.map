{"version":3,"sources":["../../src/cacheStrategies.js"],"names":["define","persistenceManager","persistenceUtils","getHttpCacheHeaderStrategy","request","response","Promise","resolve","reject","_handleExpires","then","_handleMaxAge","_handleIfCondMatch","_handleMustRevalidate","_handleNoCache","_handleNoStore","expiresDate","headers","get","cacheExpirationDate","isCachedResponse","length","set","cacheControlMaxAge","_getCacheControlDirective","requestDate","Date","toUTCString","requestTime","getTime","expirationTime","expirationDate","ifMatch","ifNoneMatch","isOnline","_handleRevalidate","err","etag","indexOf","responseToJSON","responseData","status","statusText","responseFromJSON","cacheExpirationTime","_isNoCache","pragmaNoCache","trim","delete","_cacheResponse","directive","cacheControl","i","cacheControlVal","splitVal","cacheControlValues","split","mustRevalidate","browserFetch","serverResponse","getCache","method","responseClone","clone","put"],"mappings":"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","file":"cacheStrategies.js"}