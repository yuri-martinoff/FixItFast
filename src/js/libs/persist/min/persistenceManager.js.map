{"version":3,"sources":["../../src/persistenceManager.js"],"names":["define","PersistenceXMLHttpRequest","PersistenceSyncManager","offlineCacheManager","PersistenceManager","Object","defineProperty","this","value","writable","isOnline","bind","browserFetch","getCache","_addBrowserEventListeners","persistenceManager","self","_isBrowserContext","_addedBrowserEventListeners","window","addEventListener","e","_isOffline","_dispatchEvent","eventType","event","i","j","registration","eventListenerCount","respondWithPromise","registrations","_registrations","registrationCount","length","request","url","match","_eventListeners","_setPromiseCallbacks","Function","Promise","resolve","reject","_openOfflineCache","open","then","cache","_cache","error","_replaceBrowserApis","_browserFetchFunc","_browserXMLHttpRequest","fetch","XMLHttpRequest","persistenceFetch","_browserFetchRequest","_unregister","regIdx","indexOf","splice","PersistenceRegistration","scope","enumerable","PersistenceFetchEvent","prototype","respondWith","any","response","_resolveCallback","err","_rejectCallback","resolveCallback","rejectCallback","input","init","Request","isPrototypeOf","getRegistration","fetchEvent","promise","forceOffline","offline","_forceOffline","online","navigator","onLine","network","connection","type","Connection","NONE","register","options","push","getRegistrations","slice","getSyncManager","_persistenceSyncManager","call","listener","toLowerCase","unregister","_persistenceManager"],"mappings":"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","file":"persistenceManager.js"}