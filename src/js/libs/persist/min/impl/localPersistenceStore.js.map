{"version":3,"sources":["../../../src/impl/localPersistenceStore.js"],"names":["define","PersistenceStore","LocalPersistenceStore","name","call","this","prototype","Init","options","_version","version","Promise","resolve","upsert","key","metadata","value","expectedVersionIdentifier","insertKey","createRawKey","existingValue","localStorage","getItem","existingVersionIdentifier","JSON","parse","versionIdentifier","reject","status","_insert","insertValue","valueToStore","stringify","setItem","upsertAll","dataArray","promiseArray","index","length","data","push","expectedVersionIndentifier","all","find","findExpression","self","resultSet","unsorted","allRawKeys","Object","keys","rawKey","extractKey","itemData","_satisfy","selector","sorted","_sort","sort","_constructReturnObject","fields","sortCriteria","_sortFunction","thisArg","a","b","sortField","sortC","sortAsc","Error","toLowerCase","valueA","_getValue","valueB","findByKey","storeageData","removeByKey","removeItem","_name","toString","prefix","prefixLength","indexOf","slice","expTree","_buildExpressionTree","_evaluateExpressionTree","expression","subTree","itemTreeArray","hasOwnProperty","_isMultiSelector","Array","operator","array","subindex","itemTree","_isSingleSelector","_isLiteral","left","right","partialTree","_completePartialTree","found","result","subTreeArray","subIndex","subResult","itemValue","match","undefined","token","path","paths","split","returnValue","fieldsExpression","returnObject","currentObject","currentItemDataValue","field","pathIndex","delete","deleteExpression","modExpression","then","searchResults","promises","map","_removeByKeyMapCallback","catch","err","propertyName","element","valueToOperate","allKeys"],"mappings":"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","file":"localPersistenceStore.js"}