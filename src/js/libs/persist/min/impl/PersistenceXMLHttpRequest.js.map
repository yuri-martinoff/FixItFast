{"version":3,"sources":["../../../src/impl/PersistenceXMLHttpRequest.js"],"names":["define","persistenceUtils","logger","PersistenceXMLHttpRequest","browserXMLHttpRequest","self","this","Object","defineProperty","value","writable","enumerable","get","_readyState","_response","_responseText","_responseURL","_responseXML","_status","_statusText","_readyStateChange","state","onreadystatechange","PersistenceXMLHttpRequestEvent","dispatchEvent","DONE","_isFileRequest","url","absoluteUrlOrigin","toLowerCase","indexOf","URL","prototype","window","location","href","origin","anchorElement","document","createElement","protocol","_getRequestHeaders","appendRequestHeader","requestHeader","requestHeaders","append","_requestHeaders","Headers","keys","forEach","_getRequestInit","data","credentials","withCredentials","requestInit","method","_method","headers","mode","cache","body","_processResponse","request","response","_setResponseHeaders","contentType","status","statusText","_isTextPayload","isCachedResponse","blob","then","blobData","_responseType","onload","blobErr","error","arrayBuffer","aBuffer","arrayBufferError","text","err","_responseHeaders","entries","headerEntry","headerName","headerValue","headerEntriesIter","next","_forceMimeType","HEADERS_RECEIVED","_verifyState","OPENED","Error","type","bubbles","cancelable","target","open","async","username","password","_url","_passthroughXHR","_browserXMLHttpRequest","readyState","responseHeaders","responseText","responseType","responseURL","responseXML","_username","_password","setRequestHeader","header","oldValue","send","Request","fetch","abort","log","getResponseHeader","responseHeader","getAllResponseHeaders","appendResponseHeader","overrideMimeType","mimeType","addEventListener","event","listener","_eventListeners","push","removeEventListener","i","listeners","listenersCount","length","splice","call","handleEvent","defaultPrevented","stopPropagation","preventDefault"],"mappings":"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","file":"PersistenceXMLHttpRequest.js"}