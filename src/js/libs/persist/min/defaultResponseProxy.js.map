{"version":3,"sources":["../../src/defaultResponseProxy.js"],"names":["define","persistenceManager","persistenceUtils","fetchStrategies","cacheStrategies","persistenceStoreManager","cacheHandler","DefaultResponseProxy","options","getCacheIfOfflineStrategy","getHttpCacheHeaderStrategy","requestHandlerOverride","this","handleGet","handlePost","handlePut","handlePatch","handleDelete","handleHead","handleOptions","Object","defineProperty","value","getResponseProxy","_getRequestHandler","defaultResponseProxy","request","self","_options","requestHandler","method","_handleRequestWithErrorIfOffline","isOnline","browserFetch","init","status","statusText","Promise","resolve","Response","_handleGetWithFetchStrategy","fetchStrategy","reject","then","fetchResponse","catch","err","_handlePutRequest","clone","response","ok","_handleResponseNotOk","_handleOfflinePutRequest","requestToJSON","requestData","headers","ifMatch","ifNoneMatch","randomInt","Math","floor","random","Date","now","toString","responseFromJSON","_handleDeleteRequest","_handleOfflineDeleteRequest","key","_getRequestUrlId","jsonShredder","jsonProcessor","shredder","shreddedObjArray","storeName","openStore","store","findByKey","row","setResponsePayload","offlineHandler","urlTokens","url","split","length","_applyCacheStrategy","cacheStrategy","_insertSyncManagerRequest","undoRedoDataArray","force","getSyncManager","insertRequest","_cacheShreddedData","getCache","hasMatch","ignoreSearch","matchExist","_processShreddedData","undoRedoData","constructShreddedData","shreddedData","_updateShreddedDataStore","promises","forEach","shreddedDataItem","storename","keys","push","_updateShreddedDataStoreForItem","all","_getUndoRedoDataForShreddedDataItem","undoRedoArray","_updateShreddedDataStoreForDeleteRequest","_updateShreddedDataStoreForNonDeleteRequest","i","dataArray","undoRow","undo","redo","error","upsertAll","operation","removeByKey","prototype","getFetchEventListener","event","respondWith","processRequest","endpointKey","buildEndpointKey","registerEndpointOptions","localVars","requestClone","call","isCachedResponse","unregisterEndpointOptions"],"mappings":"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","file":"defaultResponseProxy.js"}